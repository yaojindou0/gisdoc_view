- [空间数据库基础理论 GIS空间数据处理分析涉及的基本概念](https://www.cnblogs.com/zhoulujun/p/13061068.html)

## 地理空间

- GIS中的地理空间（Geo-spatial）是指经过投影变换后，在笛卡尔坐标系中的地球表层特征空间。它是地理空间的抽象表达，是信息世界层面的地理空间。
- 地理空间由地理空间定位框架及其所连接的地理空间特征实体组成。
- 地理空间定位框架即大地测量控制，为建立所有地理数据的坐标位置提供通用参考系统，将所有地理要素同平面及高程坐标系连接。
- 地理空间特征实体则为具有形状、属性和时序性的空间对象。

## 空间数据

- 空间数据是对空间事物的描述，空间数据（Spatial Data）实质上就是指以地球表面空间位置为参照，用来描述空间实体的位置、形状、大小及其分布特征诸多方面信息的数据。
- 空间数据（Spatial Data）是一种带有空间坐标的数据，包括文字、数字、图形、影像、声音等多种方式。
- 空间数据是对现实世界中空间特征和过程的抽象表达，用来描述现实世界的目标，它记录地理空间对象的位置、拓扑关系、几何特征和时间特征。位置特征和拓扑特征是空间数据特有的特征。此外，空间数据还具有定位、定性、时间、空间关系等特性。

空间数据量是巨大的，通常称海量数据。之所以称为海量数据，是指它的数据量比一般的通用数据库要大得多。一个城市地理信息系统的数据量可能达几十GB，如果考虑影像数据的存贮，可能达几百个GB。这样的数据量在其他数据库中是很少见的。地理信息系统的海量数据，带来了系统运转、数据组织与储存、网络传输等一系列技术困难，自然也给数据管理增加了难度。正因为空间数据量大，所以需要在二维空间上划分块或者图幅，在垂直方向上划分层来进行组织。

## 空间数据类型

GIS中常见的空间数据类型如下图所示：

![img](https://www.zhoulujun.cn/uploadfile/net/2019/0927/20190927204624500049084.jpg)

## 空间数据库

传统意义上的数据库无论是FoxPRO，还是Oracle、SQL  server，它们管理的信息类型主要是文字和数字，对图形的管理功能则十分薄弱。针对空间数据以文件方式管理的不足，人们开始考虑把空间数据同属性数据一起存入关系数据库中，空间数据管理都在朝着集成结构的空间数据库方向发展，实现数据库一体化存储和管理。

空间数据库既要能处理空间参考对象类型，也要能处理非空间参考对象类型。而如何表示空间或地理现象即空间参考对象的关键是其数据模型，数据模型的设计除与应用有关外，还与提供支持模型的基本概念、方法等有密切联系。空间数据的表示则与计算机表示数据的精度和计算机的存储空间有关。

目前空间数据仓库已成为空间数据库研究的热点：空间数据联机分析和空间数据挖掘

GIS空间数据库的发展历史 https://malagis.com/the-history-gis-spatial-database.html

### 空间数据库的作用

- 空间数据处理与更新
- 海量数据存储与管理
- 空间分析与决策
- 空间信息交换与共享

### GIS空间数据库与传统数据库差异

#### 1．信息描述差异

（1）在空间数据库中，数据比较复杂，不仅有与一般数据库性质相似的地理要素的属性数据，还有大量的空间数据，即描述地理要素空间分布位置的数据，并且这两种数据之间具有不可分割的联系。

（2）空间数据库是一个复杂的系统，要用数据来描述各种地理要素，尤其是要素的空间位置，其数据量往往很大。空间数据库中的数据具有丰富的隐含信息，如数字高程模型（DEM或TIN）除了载荷高度信息外，还隐含了地质岩性与构造方面的信息；植物的种类是显式信息，但植物的类型还隐含了气候的水平地带性和垂直地带性的信息等。

#### 2．数据管理差异

（1）传统数据库管理的是不连续的、相关性较小的数字和字符；而空间数据是连续的，具有很强的空间相关性。

（2）传统数据库管理的实体类型少，并且实体类型之间通常只有简单固定的空间关系；而空间数据库的实体类型繁多，实体类型之间存在着复杂的空间关系，并且能产生新的关系（如拓扑关系）。

（3）地理空间数据存储操作的对象可能是一维、二维、三维甚至更高维。一方面我们可以把空间数据库看成是传统数据库的扩充，另一方面，空间数据库突破了传统的数据库理论，如将规范关系推向非规范关系。而传统数据库系统只要针对简单对象，无法有效的支持复杂对象（如图形、图像）。

（4）地理空间数据的实体类型繁多，不少对象相当复杂，地理空间数据管理技术还必须具有对地理对象（大多为具有复杂结构和内涵的复杂对象）进行模拟和推理的功能。但是，传统数据库系统的数据模拟主要针对简单对象，管理的实体类型较少，因而，无法有效地支持以复杂对象为主体的GIS领域。

（5）空间数据库有许多与关系数据库不同的显著特征。空间数据库包含了拓扑信息、距离信息、时空信息，通常按复杂的、多维的空间索引结构组织数据，能被特有的空间数据访问方式所访问，经常需要空间推理、几何计算和空间知识表达等技术。

#### 3．数据操作差异

从数据操作的角度，地理空间数据管理中需要进行大量的空间数据操作和查询，如矢量地图的剪切、叠加和缓冲区等空间操作、裁剪、合并、影像特征提取、影像分割、影像代数运算、拓扑和相似性查询等，而传统数据库系统只操纵和查询文字和数字信息，难以适应空间操作。

#### 4．数据更新差异

（1）数据更新周期不同。传统数据库的更新频度较高，而空间数据库的更新频度一般是以年度为限。

（2）数据更新的角色不同。空间数据库更新一般由专人负责，一是因为要保证空间数据的准确性，二是空间数据的更新需要专门的技术。而传统数据库的更新可能是任何使用数据库的人员。

（3）访问的数据量不同。传统数据库每次访问的数据量较少，而空间数据库访问的数据量大，因而空间数据库要求有很高的网络带宽。

（4）数据更新的策略不同。传统数据库一般事务控制，而空间数据库一般允许访问时间相对滞后的数据，一方面因为空间对象的变化较缓慢；另一方面因为人为因素未能及时更新，但这不影响对先前更新的数据的访问；再者GIS系统一般是作为决策支持系统出现的，而决策支持系统基本上使用的是历史数据。

#### 5．服务应用差异

（1）一个空间数据库的服务和应用范围相当广泛。如地理研究、环境保护、土地利用和规划、资源开发、生态环境、市政管理、交通运输、税收、商业、公安等许多领域。

（2）空间数据库是一个共享或分享式的数据库。

（3）传统的关系数据库中存储和处理的大都是关系数据。

## 栅格数据存储和管理

栅格、影像数据库采用金字塔结构存放多种空间分辨率的栅格数据，同一分辨率的栅格数据被组织在一个层面（Layer）内，而不同分辨率的栅格数据具有上下的垂直组织关系：越靠近顶层，数据的分辨率越小，数据量也越小，只能反映原始数据的概貌；越靠近底层，数据的分辨率越大，数据量也越大，更能反映原始详情。

### 组织形式

##### (1)纵向分层组织

![GIS地图分层-纵向分层组织](https://www.zhoulujun.cn/uploadfile/images/2019/1020/2014-08-31_214853.jpg)

##### (2)横向分块组织

对相同金字塔层、相同波段内的数据按照一定分块大小进行分块存储。Tiles结构（即空间分块索引结构）是一种比较适合栅格数据处理的存储方法。其优点体现在以下几个方面：

1. 对栅格数据浏览显示时，其屏幕的可见区域只是整个数据中的一个小矩形区域，采用数据分块管理的方法，就可以减少数据的读盘时间；
2. 分块管理也利于栅格数据的压缩，因为栅格数据具有局部相关性；
3. 分块管理也利于数据库管理，现在的商用数据库大多是关系型数据库，关系型数据库对数据的管理是基于数据记录。当采用分块方式管理栅格数据时，数据分块可以与数据库的记录进行很好的对应，可以很好的利用商用数据库管理海量栅格数据。

数据分块的大小（数据块的行、列值）通常取2的幂次方，具体的大小在选择时需要考虑以下因素：数据的局部相关程度、压缩算法、栅格数据类型、栅格数据缓冲区的管理算法、用户感兴趣区域的大小、网络的传输单元等。综合考虑以上因素，我们一般选用32K或64K大小的分块。

### 存储结构

- 分层分块索引
- 在栅格数据库中，可同时包含多个栅格数据集和栅格目录，而栅格数据集既可由栅格数据库直接管理，也可由栅格目录组织管理，可根据用户需求灵活定制。
- 栅格数据集的物理存储采用“金字塔层—波段—数据分块”的多级索引机制进行组织：金字塔层—波段索引表现为栅格数据在垂直方向上多尺度、多波段的组织形式，金字塔层—数据分块索引表现为栅格数据在水平方向上多分辨率、分块存储的组织形式。基于这种多级索引结构，在使用栅格数据进行分析时可快速定位到数据分块级，有效地提高栅格数据存取速度。

### 存储数据检索

分为网格存储和二叉树存储(KD/KDB/BSP树等)。各种树操作，烧脑，等有时间在慢慢啃

## 空间数据模型的类型

在GIS中与空间信息有关的空间数据模型主要有两个：基于场(field-based)的空间模型和基于对象(object-based)的模型。

### 基于场(field-based)的空间模型

把地理空间的事物和现象作为连续的变量或体来看待，表示了在二维或者三维空间中，空间实体的属性信息被看作是连续变化的数据。例如：

![基于场(field-based)的空间模型](https://www.zhoulujun.cn/uploadfile/images/2019/1020/2014-01-24_233906.jpg)

### 基于对象(object-based)的模型

强调了离散对象,将研究的整个地理空间看成一个空间域，地理实体和现象作为独立的对象分布在该空间域中，根据它们的边界线以及它们的组成或者与它们相关的其它对象，可以详细地描述离散对象。

任何现象，无论大小，都可以被确定为一个对象(Object)，且假设它可以从概念上与其邻域现象相分离。在欧氏（Euclidean）空间中主要有点对象、线对象、多边形对象和体。例如：

![基于对象(object-based)的模型](https://www.zhoulujun.cn/uploadfile/images/2019/1020/2014-01-24_234023.jpg)

地理信息系统两种数据类型是通过两种空间数据结构来实现：栅**格（ raster ）和   矢量（vector）**。

栅格数据模型是典型的基于域的模型。矢量数据模型是典型的基于对象的空间数据模型。

### 数字表面模型

数字高程模型（Digital Elevation  Model,DEM):以数字的形式按一定结构组织在一起，表示实际地形特征空间分布的数字模型，也是地形形状大小和起伏的数字描述。DEM的核心是地形表面特征点的三维坐标数据和一套对地表提供连续描述的算法，最基本的DEM是由一系列地面点x,y位置及其相联系的高程z做组成，用数学函数式表达为z=f(x,y), (x,y)∈DEM所在的区域。

数字地形模型（Digital Terrain Mdel,DTM):用来模拟其他二维表面上连续变化的特征，比如地面景观的属性、地面温度、降水、地球磁力、重力、土地利用、土壤类型等地面特征信息。

![数字表面模型](https://www.zhoulujun.cn/uploadfile/images/2019/1020/2016-11-27_15_11_49_1480230709.32672.jpg)